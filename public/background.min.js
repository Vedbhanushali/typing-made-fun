let keyPressCount=0,startTime=null;function isValidKey(e){return e.match(/^[a-z0-9]$/i)}function playSound(e,t){let a=chrome.runtime.getURL("assets/sounds/");const s=(s,c)=>{a+=`${e}/`,a+=" "==t?"space.wav":"Enter"==t?"enter.wav":"Backspace"==t?"backspace.wav":`${((e,t)=>Math.floor(Math.random()*(t-e+1))+e)(s,c)}.wav`};switch(e){case"mechanical_keyboard":case"typewriter":case"numpad":s(0,3);break;case"chess":s(0,2);break;default:e="mechanical_keyboard",s(0,3)}new Audio(a).play()}chrome.runtime.onMessage.addListener(((e,t)=>{"keyPress"===e.type&&chrome.storage.local.get(["startClicked","theme","blocklist"],(function(a){if(a.startClicked){null===startTime&&(startTime=Date.now()),isValidKey(e.key)&&keyPressCount++;const s=t.url;(a.blocklist||[]).some((e=>s.includes(e)))||chrome.scripting.executeScript({target:{tabId:t.tab.id},function:playSound,args:[a.theme,e.key]});let c=(Date.now()-startTime)/1e3/60;const r=keyPressCount/5/c;chrome.storage.local.set({wpm:Math.round(r)})}}))}));